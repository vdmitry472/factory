<!DOCTYPE html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Factory</title>

    <!-- Common packages: JQuery & Bootstrap -->
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

    <!-- <link rel="stylesheet" href="/css/bootstrap.min.css"> -->
    <!-- <link rel="stylesheet" href="/css/bootstrap-theme.min.css"> -->
    <!-- <link rel="stylesheet" href="/css/main.css"> -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/fonts/stylesheet.css">
    <!-- <link rel="stylesheet" href="/css/font-awesome.css" > -->

    <script src="/js/jquery.min.js"></script>
    <script src="/js/moment.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>

    <!-- The Viewer CSS -->
    <link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/style.min.css?v=v3.3.*" type="text/css">

    <!-- Viewer production -->
    <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/three.min.js?v=v3.3.*"></script>
    <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/viewer3D.min.js?v=v3.3.*"></script>
    
    <!-- The Viewer Extensions -->
    <script src="/extensions/Viewing.Extension.Markup3D.min.js"></script>
    <script src="/extensions/Viewing.Extension.Transform.min.js"></script>
    <script src="/extensions/_Viewing.Extension.ControlSelector.min.js"></script>

    <!-- The Viewer JS -->
    <script src="/js/oauth.js"></script>
    <script src="/js/index.js"></script>
<<<<<<< HEAD
    <script src="/js/ui.js"></script>
    <script src="js/class.js"></script>
    <script src="js/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>

=======
    <script src="/js/class.js"></script>
    <!-- <script src="/js/ui.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.js"></script> -->
>>>>>>> 9f7b41bd739286fb75cfcb2f966ee4fab3d845c1


</head>

<body>
        <div class="push red">
            <div>

            </div>
            <p>
                Новое уведомление
            </p>
        </div>
        <section id="nav">
                <div>
        
               
                <div class="burger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <div class="menu">
                  <div class="close">
                    <span></span>
                    <span></span>
                  </div>
                  <div>
                    <h1>Меню</h1>
                    <a href="http://autodesk6.vuztc.ru">Выйти</a>
                    
                    <a href="http://autodesk6.vuztc.ru">О проекте</a>
                    <p>Контакты: <br>
                    Денис Петраков<br>
                    Артемий Устюхин</p>
                  </div>
                  </div>
                <h1>
                    Factory 
                </h1>
                <div class="account">
                   <div></div>
                   <p>Петров А.С.</p>
                   <span>Выход</span>
                </div>
            </div>
            </section>
            <section id="viewer">
        
            </section>
            <section class="back">
              
                <div class="list list1" data-id="1">
                  
                  <div class="item" onclick="openPage(2)">
                    <p>Управление</p>
                    <img src="css/arrow.png" alt="" class="arrow">                    
                  </div>
                  <div class="item"  onclick="openPage(3)">
                      <p>Триггеры</p>
                      <img src="css/arrow.png" alt="" class="arrow">                    
                    </div>
                    <div class="item"  onclick="openPage(4)">
                        <p>История</p>
                        <img src="css/arrow.png" alt="" class="arrow">                    
                      </div>
                      <div class="item" onclick="openPage(5)">
                          <p>Все уведомления</p>
                          <img src="css/arrow.png" alt="" class="arrow">                    
                        </div>
                        <div class="item" onclick="openPage(6)">
                            <p>Показатели</p>
                            <img src="css/arrow.png" alt="" class="arrow">                    
                        </div>
                       
                          <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>


                </div>
                <div class="list list5 " id="all-notifications" data-id="5">
                    <h2  onclick="back()">Назад</h2>

                </div>
                <div class="list list2" data-id="2">
                    <h2 onclick="back()">Назад</h2>
                    <div class="item" onclick="showElem(2523)">
                          <p>
                              Датчик Темпратуры 1
                          </p>
                    </div>
                    <div class="item" onclick="showElem(2537)">
                        <p>
                            Датчик Темпратуры 2
                        </p>
                  </div>
                  <div class="item" onclick="showElem(2097)">
                      <p>
                          Датчик Темпратуры 3
                      </p>
                </div>
                <div class="item" onclick="showElem(2097)">
                    <p>
                        Вентель
                    </p>
              </div>
              <div class="item" onclick="showElem(2097)">
                  <p>
                      Заслонка
                  </p>
            </div>
                  </div>

                  <div class="list list6" data-id="6">
                  
                      <h2  onclick="back()">Назад</h2>
                  <div id="container1" style="width: 80%; height: 300px; margin: 25px auto"></div>
                  <div id="container2" style="width: 80%; height: 300px; margin: 25px auto"></div>
                      
                    </div>
  

                  

                  <div class="notifications">
                      <h1>
                        Уведомления
                      </h1>
                      <div class="alert red" onclick="openNotification('Новое','Новое','red')">
                          <div>
    
                            </div>
                            <p>
                                Новое уведомление
                            </p>
                      </div>
                      
                  </div>
            </section>
           
            <div id="notification-details" class="" >
                <div >
                    <div class="close" onclick='$("#notification-details").removeClass("open")'>
                        <span></span>
                        <span></span>
                    </div>
                  <h3 class=""></h3>
                  <p></p>
                </div>
            </div>
  
   
<script>




</script>
    <script>
   Highcharts.setOptions({
    global: {
        useUTC: false
    }
});

var ch = [];
ch[0] = Highcharts.chart('container1', {
    chart: {
        type: 'spline',
        animation: Highcharts.svg, // don't animate in old IE
        marginRight: 10,
        events: {
            load: function () {

                // set up the updating of the chart each second
                var series = this.series[0];
                // setInterval(function () {
                //     var x = (new Date()).getTime(), // current time
                //         y = Math.random();
                //     series.addPoint([x, y], true, true);
                // }, 1000);
            }
        }
    },
    title: {
        text: 'Датчик 1'
    },
    xAxis: {
        type: 'datetime',
        tickPixelInterval: 150
    },
    yAxis: {
        title: {
            text: 'Value'
        },
        plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
        }]
    },
    tooltip: {
        formatter: function () {
            return '<b>' + this.series.name + '</b><br/>' +
                Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
                Highcharts.numberFormat(this.y, 2);
        }
    },
    legend: {
        enabled: false
    },
    exporting: {
        enabled: false
    },
    series: [{
      name: 'Датчик 2',
        data: (function () {
            // generate an array of random data
            var data = [],
                time = (new Date()).getTime(),
                i;

            
            for (i = -19; i <= 0; i += 1) {
                data.push({
                    x: time + i * 1000,
                    y: Math.random()
                });
            }
            console.log(data);
            return data;
        }())
    }]
});
ch[1] = Highcharts.chart('container2', {
    chart: {
        type: 'spline',
        animation: Highcharts.svg, // don't animate in old IE
        marginRight: 10,
        events: {
            load: function () {

                // set up the updating of the chart each second
                var series = this.series[0];
                // setInterval(function () {
                //     var x = (new Date()).getTime(), // current time
                //         y = Math.random();
                //     series.addPoint([x, y], true, true);
                // }, 1000);
            }
        }
    },
    title: {
        text: 'Датчик 2'
    },
    xAxis: {
        type: 'datetime',
        tickPixelInterval: 150
    },
    yAxis: {
        title: {
            text: 'Value'
        },
        plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
        }]
    },
    tooltip: {
        formatter: function () {
            return '<b>' + this.series.name + '</b><br/>' +
                Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
                Highcharts.numberFormat(this.y, 2);
        }
    },
    legend: {
        enabled: false
    },
    exporting: {
        enabled: false
    },
    series: [{
        name: 'Датчик 2',
        data: (function () {
            // generate an array of random data
            var data = [],
                time = (new Date()).getTime(),
                i;

            
            for (i = -19; i <= 0; i += 1) {
                data.push({
                    x: time + i * 1000,
                    y: Math.random()
                });
            }
            console.log(data);
            return data;
        }())
    }]
});

        const socket = io('https://fsensor.herokuapp.com/');
        socket.open();
        
        
  socket.on('value', (data) => {
    console.log(data);
    // var n = parseFloat(data);
    var json = JSON.parse(data);
    addSensorValueByIdToBrouserList(json.id,json.value);
    var text = "Датчик "+json.id+": "+json.value+" Cº";
    ch[parseInt(json.id)-1].series[0].addPoint([(new Date()).getTime(),json.value],true,true);
    if ( json.value < 50)
    {
      // addNotification(text,"green");
      changeMaterial(parseInt(json.id)-1,'normal')
    }
    else if (json.value > 70)
    {
      addNotification(text,"red");
      changeMaterial(parseInt(json.id)-1,'danger');
      
      
      
    }
    else {
      addNotification(text,"yellow");
      changeMaterial(parseInt(json.id)-1,'attention')      
    }
  });
  
  
                  
  
           
         
        </script>

</body>
</html>

